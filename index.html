<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üç∫ Cheers, Ya Old Bastard!</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    font-family: "Comic Sans MS", cursive, sans-serif;
    color: gold;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    text-align: center;
    /* The beer gradient background */
    background: linear-gradient(to bottom, #fff9e6 0%, #fff4cc 5%, #d4a017 40%, #b58000 100%);
  }

  /* Foam at top */
  .foam {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 10%;
    background: #fff;
    border-bottom-left-radius: 30% 40%;
    border-bottom-right-radius: 30% 40%;
    box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    z-index: 5;
  }

  h1 {
    font-size: 3em;
    text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
    margin-bottom: 20px;
    z-index: 10;
  }

  button {
    background: gold;
    color: #4a2c00;
    border: none;
    padding: 12px 25px;
    border-radius: 25px;
    font-size: 1.1em;
    cursor: pointer;
    margin-top: 20px;
    transition: transform 0.2s, background 0.3s;
    z-index: 10;
  }
  button:hover { transform: scale(1.1); background: #ffd700cc; }

  /* Bubbles */
  .bubbles {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
    z-index: 3;
  }
  .bubble {
    position: absolute;
    bottom: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.7);
    animation: rise linear forwards;
  }
  @keyframes rise {
    0%   { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-120vh) scale(0.6); opacity: 0; }
  }

  /* --- Mugs: The sliding elements --- */
  .mug {
    position: absolute;
    width: 120px;
    bottom: 100px;
    /* Mugs start invisible */
    opacity: 0; 
    /* Transition applied to all properties (position, rotation, opacity) */
    transition: all 1s ease;
    z-index: 10;
  }
  #leftMug {
    /* Start position: Far off the left screen edge */
    left: -300px; 
    transform: rotate(-20deg);
  }
  #rightMug {
    /* Start position: Far off the right screen edge */
    right: -300px; 
    transform: rotate(20deg);
  }

  /* Destination position when 'show' class is added */
  .showLeft {
    left: calc(50% - 150px);
    /* CRITICAL: Ensure opacity is set to 1 to override the default 0 */
    opacity: 1; 
  }
  .showRight {
    right: calc(50% - 150px);
    /* CRITICAL: Ensure opacity is set to 1 to override the default 0 */
    opacity: 1;
  }

  /* --- Photo popup: The fade-in element --- */
  #photo {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 300px;
    border: 5px solid gold;
    border-radius: 10px;
    /* CRITICAL: Start invisible for the fade-in effect */
    opacity: 0; 
    z-index: 20;
    transition: opacity 1s ease;
  }
  .showPhoto {
    /* Destination opacity for fading in */
    opacity: 1;
  }
</style>
</head>
<body>
  <div class="foam"></div>

  <h1>üçª Happy Birthday, Ya Old Bastard!</h1>
  <button id="celebrateButton">Celebrate!</button>
  <div class="bubbles" id="bubbles"></div>

  <img id="leftMug" class="mug"
        src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d6/Emoji_u1f37a.svg/120px-Emoji_u1f37a.svg.png"
        alt="Beer mug left">
  <img id="rightMug" class="mug"
        src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d6/Emoji_u1f37a.svg/120px-Emoji_u1f37a.svg.png"
        alt="Beer mug right">

  <img id="photo" src="photo.jpg" alt="Photo">

  <audio id="cheerSound" src="cheers.mp3" preload="auto"></audio>

<script>
const btn = document.getElementById("celebrateButton");
const bubbles = document.getElementById("bubbles");
const leftMug = document.getElementById("leftMug");
const rightMug = document.getElementById("rightMug");
const photo = document.getElementById("photo");
const cheerSound = document.getElementById("cheerSound");

// Initialize mugs to their off-screen, rotated starting positions 
// This ensures the CSS position is overridden by JS for a cleaner reset later.
leftMug.style.left = "-300px";
leftMug.style.transform = "rotate(-20deg)";
rightMug.style.right = "-300px";
rightMug.style.transform = "rotate(20deg)";


btn.addEventListener("click", () => {
  // 1. Create bubbles...
  for (let i = 0; i < 40; i++) {
    const b = document.createElement("div");
    b.className = "bubble";
    const size = 8 + Math.random() * 22;
    b.style.width = b.style.height = size + "px";
    b.style.left = Math.random() * 100 + "%";
    const dur = 4 + Math.random() * 4;
    b.style.animationDuration = dur + "s";
    b.style.animationDelay = Math.random() * 2 + "s";
    bubbles.appendChild(b);
    setTimeout(() => b.remove(), (dur + 2) * 1000);
  }

  // 2. Slide mugs in (1s transition)
  leftMug.classList.add("showLeft");
  rightMug.classList.add("showRight");
  
  // 3. Clink, straighten mugs, and show photo (1s after slide-in starts)
  setTimeout(() => {
    // Stop rotation at the center (the clink)
    leftMug.style.transform = "rotate(0deg)";
    rightMug.style.transform = "rotate(0deg)";
    
    // Fade in the photo
    photo.classList.add("showPhoto");
    
    // Play the sound
    try { cheerSound.currentTime = 0; cheerSound.play(); } catch(e){}
  }, 1000);

  // 4. Fade photo out (after 5s display time)
  setTimeout(() => photo.classList.remove("showPhoto"), 6000);

  // 5. Reset mugs (1s after photo fade-out starts)
  setTimeout(() => {
    // 5a. Remove 'show' classes: This immediately starts the 1s fade-out (opacity 1 -> 0)
    leftMug.classList.remove("showLeft");
    rightMug.classList.remove("showRight");
    
    // 5b. Reset rotation immediately, as this is part of the starting position
    leftMug.style.transform = "rotate(-20deg)";
    rightMug.style.transform = "rotate(20deg)";
    
    // 5c. After the fade-out is complete (1s), jump them back to the far off-screen position
    setTimeout(() => {
        leftMug.style.left = "-300px";
        rightMug.style.right = "-300px";
    }, 1000);
    
  }, 7000);
});
</script>
</body>
</html>
